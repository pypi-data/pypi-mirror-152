#!/usr/bin/env python3
# This file is placed in the Public Domain.


"bot command"


import sys


from bot.obj import Config


Config.name = "botcmd"
Config.version = "160"
Config.workdir = "/var/lib/botd/"


from bot.evt import Command
from bot.hdl import Callbacks, Handler, dispatch


import bot.cmd.all


class CLI(Handler):

    def cmd(self, txt):
        e = Command()
        e.parse(txt, repr(self))
        self.handle(e)
        e.wait()

    def raw(self, txt):
        print(txt)
        sys.stdout.flush()


def main():
    Callbacks.add("command", dispatch)
    Callbacks.threaded = False
    c = CLI()
    return c.cmd(" ".join(sys.argv[1:]))


main()
