system:
  id_system: bowyer_smoketest


###############################################################################
host:
  localhost:
    hostname:        'localhost'
    acct_run:        'wtp'
    acct_provision:  'wtp'
    port_range:      '8090-9000'
    dirpath_log:     ''
    launch_script:   ''
    log_level:       'TRACE'


###############################################################################
process:
  main_process:
    host: localhost


###############################################################################
node:

  # ---------------------------------------------------------------------------
  controller:
    process:        main_process
    req_host_cfg:   default_configuration
    functionality:
      py_module:    bowyer.lib.test.native.native_controller
    state_type:     py_dict
    config:
      frequency_hz: 100
      idx_max:      10

  # ---------------------------------------------------------------------------
  printer:
    process:        main_process
    req_host_cfg:   default_configuration
    functionality:
      py_module:    bowyer.lib.test.native.native_printer
    state_type:     py_dict
    config:
      output:       stdout



###############################################################################
edge:
- owner: controller
  data:  py_list
  src:   controller.outputs.control
  dst:   printer.inputs.control



###############################################################################
data:
  py_list:  py_list
  py_dict:  py_dict
  py_str:   py_str


###############################################################################
req_host_cfg:
  default_configuration:
    role:
      - default_role


###############################################################################
role:
  default_role:
    tasks:
      - name: Update apt-get repo and cache
        become:        yes
        become_user:   root
        become_method: sudo
        apt:
          update_cache:     yes
          force_apt_get:    yes
          cache_valid_time: 3600
