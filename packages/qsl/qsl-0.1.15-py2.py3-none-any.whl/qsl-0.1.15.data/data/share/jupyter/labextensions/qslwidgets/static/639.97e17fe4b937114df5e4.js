"use strict";(self.webpackChunkqslwidgets=self.webpackChunkqslwidgets||[]).push([[639],{84458:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultWidgetState=t.CommonWidget=void 0;const n=l(a(56271)),i=a(78564),o=a(4741),s=l(a(20544));t.defaultWidgetState={states:[],urls:[],type:"image",message:"",config:{image:[],regions:[]},labels:{image:{},polygons:[],masks:[],boxes:[]},action:"",preload:[],maxCanvasSize:512,maxViewHeight:512,idx:0,viewState:"labeling",sortedIdxs:[],mediaIndex:{rows:[],columns:[]},buttons:{next:!0,prev:!0,save:!0,config:!0,delete:!0,ignore:!0,unignore:!0},base:{serverRoot:"",url:""},progress:-1,mode:"light"};const r=({extract:e})=>{var t,a;const{setToast:l}=n.default.useContext(s.default),r=e("config"),d=e("states"),c=e("urls"),u=e("type"),m=e("labels"),f=e("action"),g=e("progress"),p=e("mode"),b=e("buttons"),v=e("preload"),h=e("maxCanvasSize"),y=e("maxViewHeight"),x=e("viewState"),w=e("mediaIndex"),O=e("idx"),E=e("message"),j=e("sortedIdxs");n.default.useEffect((()=>{""!==E.value&&(l(E.value),E.set(""))}),[E.value,l]);const k={config:{image:(null===(t=r.value)||void 0===t?void 0:t.image)||[],regions:(null===(a=r.value)||void 0===a?void 0:a.regions)||[]},preload:v.value,options:{progress:g.value,maxCanvasSize:h.value,showNavigation:!0,maxViewHeight:y.value},callbacks:{onSave:b.value.save?e=>{m.set(e),f.set("save")}:void 0,onSaveConfig:b.value.config?r.set:void 0,onNext:b.value.next?()=>f.set("next"):void 0,onPrev:b.value.prev?()=>f.set("prev"):void 0,onDelete:b.value.delete?()=>f.set("delete"):void 0,onIgnore:b.value.ignore?()=>f.set("ignore"):void 0,onUnignore:b.value.unignore?()=>f.set("unignore"):void 0,onShowIndex:()=>f.set("index")}};return n.default.createElement(i.ThemeProvider,{theme:i.createTheme({palette:{mode:p.value||"light"}})},n.default.createElement(i.ScopedCssBaseline,null,n.default.createElement(i.Box,{style:{padding:16}},n.default.createElement(i.Box,{hidden:"index"!==x.value},n.default.createElement(o.MediaIndex,{grid:w.value,setSortedIdxs:j.set,rowKey:"qslId",idx:O.value,visible:"index"===x.value,sortedIdxs:j.value,label:e=>{O.set(e),f.set("label")},viewHeight:y.value})),0===d.value.length||"index"===x.value?null:1==d.value.length?"image"===u.value?n.default.createElement(o.ImageLabeler,Object.assign({},k,{labels:m.value||{},target:"transitioning"===x.value?void 0:c.value[0],metadata:"transitioning"===x.value?{}:d.value[0].metadata})):"video"===u.value?n.default.createElement(o.VideoLabeler,Object.assign({},k,{labels:Array.isArray(m.value)?m.value:[],target:c.value[0],metadata:"transitioning"===x.value?{}:d.value[0].metadata})):"time-series"==u.value?n.default.createElement(o.TimeSeriesLabeler,Object.assign({},k,{labels:m.value||{},target:"transitioning"===x.value?void 0:c.value[0],metadata:"transitioning"===x.value?{}:d.value[0].metadata})):null:n.default.createElement(o.BatchImageLabeler,Object.assign({},k,{labels:m.value||{},target:c.value,states:"transitioning"===x.value?[]:d.value,setStates:e=>d.set(e)})))))};t.CommonWidget=e=>n.default.createElement(o.Labeler,null,n.default.createElement(r,Object.assign({},e)))},82639:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLabelerView=t.MediaLabelerModel=void 0;const n=l(a(56271)),i=l(a(14456)),o=a(97697),s=a(82565),r=a(47295),d=a(84458),c=a(18657),u=({model:e})=>{const t=r.useModelStateExtractor(e),a=t("base");return n.default.useEffect((()=>{a.set({serverRoot:o.PageConfig.getOption("serverRoot"),url:o.PageConfig.getBaseUrl()})})),n.default.createElement(d.CommonWidget,{extract:t})};class m extends s.DOMWidgetModel{defaults(){return Object.assign(Object.assign(Object.assign({},super.defaults()),{_model_name:m.model_name,_model_module:m.model_module,_model_module_version:m.model_module_version,_view_name:m.view_name,_view_module:m.view_module,_view_module_version:m.view_module_version}),d.defaultWidgetState)}}t.MediaLabelerModel=m,m.serializers=Object.assign({},s.DOMWidgetModel.serializers),m.model_name="MediaLabelerModel",m.model_module=c.MODULE_NAME,m.model_module_version=c.MODULE_VERSION,m.view_name="MediaLabelerView",m.view_module=c.MODULE_NAME,m.view_module_version=c.MODULE_VERSION;class f extends s.DOMWidgetView{render(){this.el.classList.add("qsl-image-labeler-widget");const e=n.default.createElement(u,{model:this.model});i.default.render(e,this.el)}}t.MediaLabelerView=f},47295:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useModelEvent=t.useModelState=t.useModelStateExtractor=void 0;const n=l(a(56271)),i=(e,t)=>{const[a,l]=n.default.useState(null==t?void 0:t.get(e));return o(t,`change:${e}`,(t=>{l(t.get(e))}),[e]),{value:a,set:function(a,l){null==t||t.set(e,a,l),null==t||t.save_changes()}}};t.useModelState=i,t.useModelStateExtractor=e=>t=>i(t,e);const o=(e,t,a,l)=>{n.default.useEffect((()=>{const l=t=>e&&a(e,t);return null==e||e.on(t,l),()=>{null==e||e.unbind(t,l)}}),(l||[]).concat([e]))};t.useModelEvent=o},72428:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(78564),i=a(47359),o=l(a(56271)),s=l(a(34591)),r=l(a(63742)),d=l(a(20544)),c=l(a(72762)),u=l(a(87428)),m=a(5610),f=a(30969),g=n.styled(n.ImageList)`
  & .MuiImageListItem-root {
    width: 100%;

    & img {
      transition: opacity 1s;
      z-index: 0;
      opacity: 1;
    }

    &.active,
    &:active img {
      transition: opacity 1s;
      opacity: 0.25;
    }
  }
  & .MuiImageListItemBar-titleWrap {
    padding: 8px;
  }
  & .MuiImageListItemBar-root {
    z-index: 1;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.7) 0%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0) 100%
    );
  }
`;t.default=({target:e=[],labels:t,options:a,callbacks:l,setStates:p,states:b,config:v={image:[],regions:[]},columns:h=3})=>{const y=f.useMediaLarge(),x=o.default.useCallback((e=>p(b.slice(0,e).concat([Object.assign(Object.assign({},b[e]),{selected:!b[e].selected})]).concat(b.slice(e+1)))),[p,b]),{setToast:w}=o.default.useContext(d.default),{draft:O,setDraft:E,resetDraft:j}=f.useDraftLabelState(t,[e]),k=o.default.useCallback((()=>(null==l?void 0:l.onSave)?l.onSave(Object.assign({},m.draft2labels(O.labels))):void 0),[O,null==l?void 0:l.onSave]);return o.default.useEffect((()=>{b&&b.some((e=>["boxes","masks","polygons"].some((t=>e.labels&&e.labels[t||"masks"]&&e.labels[t||"masks"].length>0))))&&w("Warning: One of these items has region labels that will be overwritten upon saving.")}),[b]),o.default.createElement(r.default,{layout:y?"horizontal":"vertical",progress:null==a?void 0:a.progress,control:o.default.createElement(c.default,{disabled:!1,direction:"column",showNavigation:null==a?void 0:a.showNavigation,config:{image:null==v?void 0:v.image,regions:void 0},draft:O,setDraft:E,callbacks:Object.assign(Object.assign({},l),{onSave:(null==l?void 0:l.onSave)?k:void 0,onReset:j,onSelectAll:b.some((e=>e.visible&&!e.selected))?()=>p(b.map((e=>Object.assign(Object.assign({},e),{selected:e.visible})))):void 0,onSelectNone:b.some((e=>e.visible&&e.selected))?()=>p(b.map((e=>Object.assign(Object.assign({},e),{selected:!1})))):void 0})}),content:o.default.createElement(n.Box,null,o.default.createElement(u.default,null),o.default.createElement(g,{cols:h,sx:{mt:0},variant:"masonry"},b.map(((t,a)=>{var l;return t.visible?o.default.createElement(n.ImageListItem,{key:a,"data-index":a,onClick:()=>x(a),tabIndex:0,className:"batch-image-list-item"},o.default.createElement(n.ImageListItemBar,{position:"top",title:o.default.createElement(n.Box,{sx:{height:25}},t.ignored?o.default.createElement(n.Box,{title:"ignored",flexDirection:"row-reverse",alignItems:"center",display:"flex"},o.default.createElement(i.VisibilityOff,null)):t.labeled?o.default.createElement(n.Box,{title:"labeled",flexDirection:"row-reverse",alignItems:"center",display:"flex"},o.default.createElement(i.TurnedIn,null)):null),actionIcon:o.default.createElement(n.IconButton,{sx:{color:"white"},"aria-label":`selected ${a}`},t.selected?o.default.createElement(i.CheckCircle,null):o.default.createElement(i.Circle,null)),actionPosition:"left"}),e[a]?o.default.createElement("img",{src:e[a]}):o.default.createElement(n.Box,{sx:{mb:5}}),t.metadata?o.default.createElement(s.default,{data:Object.fromEntries(Object.entries(t.metadata||{}).concat((null===(l=t.labels)||void 0===l?void 0:l.image)?(v.image||[]).map((e=>[e.displayName||e.name,t.labels.image[e.name]?e.multiple?t.labels.image[e.name].join(", "):t.labels.image[e.name][0]:void 0])).filter((([e,t])=>void 0!==t)):[]))}):null):null}))))})}},46951:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(30969),o=a(78564),s=a(5610);t.default=({children:e,steps:t})=>{const a=n.default.useRef(null),l=o.useTheme(),[r,d]=n.default.useState(0),[c,u]=n.default.useState({text:"",show:!1,position:{x:.5,y:.5}});return n.default.useEffect((()=>{a&&(()=>{const e=t[r],l=r+1<t.length?r+1:0;if(!a.current)return;const n=a.current.querySelector(e.target);if(!n)return console.error("Failed to find target",e.target),void d(l);const o=e.offset?{x:e.offset.x*n.clientWidth,y:e.offset.y*n.clientHeight}:void 0,s=((e,t,a)=>{const l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=l.x+(a?a.x:l.width/2),o=l.y+(a?a.y:l.height/2);return{x:(i-n.x)/n.width,y:(o-n.y)/n.height}})(n,a.current,o);u({text:e.text,show:!0,position:s}),i.delay(1500).then((()=>u({show:!1,position:s,text:e.text}))).then((()=>i.delay(250))).then((()=>d(l)))})()}),[a,r]),n.default.createElement("div",{ref:a,style:{position:"relative"}},e,n.default.createElement(o.Box,{sx:{position:"absolute",left:s.pct2css(c.position.x),top:s.pct2css(c.position.y),width:250,bgcolor:l.palette.primary.main,color:l.palette.primary.contrastText,border:"2px solid #000",boxShadow:36,transition:"opacity 125ms",p:2,zIndex:100,opacity:c.show?1:0}},n.default.createElement(o.Typography,null,c.text)))}},30284:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(42176)),s=l(a(72762)),r=l(a(70649)),d=l(a(9035)),c=l(a(63742)),u=a(30969),m=a(5610);t.default=({target:e,labels:t={image:{}},options:a,callbacks:l,metadata:f,preload:g,config:p={image:[],regions:[]}})=>{var b,v,h;const{draft:y,setDraft:x,resetDraft:w}=u.useDraftLabelState(t,[e]),O={viewer:n.default.useRef(null),source:n.default.useRef(null),canvas:n.default.useRef(null)},E=u.useLoader(n.default.useCallback((e=>new Promise(((e,t)=>{if(O.source.current){const t={width:O.source.current.naturalWidth,height:O.source.current.naturalHeight};e({size:t,layout:t.height>t.width?"horizontal":"vertical"})}else t("Did not find source ref.")}))),[O.source,e]),e),j=n.default.useCallback((()=>{var e;return(null==l?void 0:l.onSave)?l.onSave(Object.assign(Object.assign({},m.draft2labels(y.labels)),{dimensions:null===(e=E.mediaState)||void 0===e?void 0:e.size})):void 0}),[y,E.mediaState,null==l?void 0:l.onSave]),k=u.useMediaMouseCallbacks(y,x,O,!!(p.regions&&p.regions.length>0),null==a?void 0:a.maxCanvasSize);return n.default.createElement(c.default,{metadata:f,progress:null==a?void 0:a.progress,layout:(null===(b=E.mediaState)||void 0===b?void 0:b.layout)||"horizontal",control:n.default.createElement(s.default,{config:p,disabled:"loading"===E.loadState,direction:"horizontal"===((null===(v=E.mediaState)||void 0===v?void 0:v.layout)||"horizontal")?"column":"row",draft:y,showNavigation:null==a?void 0:a.showNavigation,setDraft:x,callbacks:Object.assign(Object.assign({},l),{onSave:(null==l?void 0:l.onSave)?j:void 0,onReset:w})}),content:n.default.createElement(i.Box,null,n.default.createElement(i.Box,null,n.default.createElement(o.default,{size:null===(h=E.mediaState)||void 0===h?void 0:h.size,maxViewHeight:null==a?void 0:a.maxViewHeight,media:{main:e?n.default.createElement("img",Object.assign({},k,{ref:O.source,onLoad:E.callbacks.onLoad,onError:E.callbacks.onError,src:E.src,style:{cursor:p.regions&&p.regions.length>0?"none":void 0}})):null,mini:e?n.default.createElement("img",{src:E.src}):null},loadState:E.loadState,onMouseLeave:()=>x(Object.assign(Object.assign({},y),{cursor:Object.assign(Object.assign({},y.cursor),{coords:void 0})}))},n.default.createElement(d.default,{config:p,draft:y,callbacks:k}))),n.default.createElement("canvas",{style:{display:"none"},ref:O.canvas}),"loading"!==E.loadState&&g?n.default.createElement(r.default,{images:g}):null)})}},8800:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(78564),s=n(a(69771)),r=n(a(20544)),d=a(30969);t.default=e=>{var{children:t}=e,a=l(e,["children"]);const n={hidden:i.default.useRef(null),container:i.default.useRef(null)},[c,u]=i.default.useState(""),[m,f]=i.default.useState(!1),g=i.default.useCallback((()=>{n.hidden.current&&n.hidden.current.focus({preventScroll:!0})}),[n.hidden]);return d.useInterval((()=>{const e=!(!n.container.current||!n.container.current.contains(document.activeElement));e!==m&&f(e)}),100,!0,[n,m]),i.default.createElement(r.default.Provider,{value:{container:n.container,setToast:u,setFocus:g,hasFocus:m}},i.default.createElement(o.Box,{className:"react-image-labeler",ref:n.container,style:{position:"relative"}},i.default.createElement(o.Box,Object.assign({},a),t,i.default.createElement(s.default,{ref:n.hidden}),i.default.createElement(o.Snackbar,{sx:{position:"absolute",height:"100%",left:"50%"},anchorOrigin:{horizontal:"center",vertical:"top"},open:""!==c,autoHideDuration:3e3,onClose:()=>u(""),message:c}))))}},48847:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=a(5228),s=a(47359),r=l(a(20544)),d=a(30969),c=i.styled(o.DataGrid)`
  & .MuiDataGrid-cell:focus {
    outline: none;
  }
`;t.default=e=>{const{idx:t,grid:a,label:l,rowKey:o,visible:u,viewHeight:m,sortedIdxs:f,setSortedIdxs:g}=e,p=Math.floor(m/60),b=n.default.useRef(null),[v,h]=n.default.useState(0),[y,x]=n.default.useState([]),{setFocus:w}=n.default.useContext(r.default);n.default.useEffect((()=>{if(u)if(y.length>0){const e=y[0].field;if("mediaIndexSortState"===e)return;const t=y[0].sort;g(a.rows.slice().sort(((a,l)=>{const n=a[e],i=l[e],o="asc"===t?1:-1;return n==i?0:n>i?o:-o})).map((e=>e[o])))}else g(a.rows.map((e=>e[o])))}),[y]),n.default.useEffect((()=>{u&&x([{field:"mediaIndexSortState",sort:"asc"}])}),[u]);const O=n.default.useCallback((()=>{if(!u)return;const e=f.findIndex((e=>e===t));h(Math.floor(e/p))}),[t,y,u]);d.useKeyboardEvent((e=>{if(!b.current||!u)return;let t;switch(e.key){case"ArrowRight":t=".MuiTablePagination-actions button:nth-of-type(2)";break;case"ArrowLeft":t=".MuiTablePagination-actions button:nth-of-type(1)";break;default:return}if(!t)return;const a=b.current.querySelector(t);a&&(d.simulateClick(a),w())}),[v,b,u]),n.default.useEffect(O,[t,u]);const E=n.default.useMemo((()=>a.rows.map((e=>Object.assign(Object.assign({},e),{mediaIndexSortState:f.indexOf(e[o])})))),[f,a.rows]);return n.default.createElement(i.Box,{onClick:w},n.default.createElement(i.Box,{style:{height:m,width:"100%"},ref:b},n.default.createElement(c,{disableColumnFilter:!0,rows:E,columns:a.columns.concat({field:"mediaIndexSortState",hide:!0}),pageSize:p,rowsPerPageOptions:[p],disableSelectionOnClick:!0,onRowClick:e=>{l(e.id)},selectionModel:[t],page:v,onPageChange:h,sortModel:y,onSortModelChange:x,hideFooterSelectedRowCount:!0,getRowId:e=>e[o]})),n.default.createElement(i.ButtonGroup,{sx:{mt:2},fullWidth:!0,size:"small","aria-label":"index control menu"},n.default.createElement(i.Button,{onClick:()=>l(t),startIcon:n.default.createElement(s.ArrowBack,null)},"Back to Labeling")))}},28831:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=l(a(42176)),o=l(a(39922)),s=l(a(72762)),r=l(a(63742)),d=a(5610),c=a(30969),u=a(11599);t.default=({target:e,labels:t,config:a={image:[]},options:l,callbacks:m,metadata:f})=>{const{draft:g,setDraft:p,resetDraft:b}=c.useDraftLabelState(t,[e]),v=n.default.useCallback((()=>(null==m?void 0:m.onSave)?m.onSave(Object.assign({},d.draft2labels(g.labels))):void 0),[g,null==m?void 0:m.onSave]),h=n.default.useCallback(((e,t)=>{var l;return p(Object.assign(Object.assign({},g),{labels:Object.assign(Object.assign({},g.labels),{image:Object.assign(Object.assign({},g.labels.image),{[e]:u.processSelectionChange(t,g.labels.image[e]||[],!!a.image&&(null===(l=a.image.filter((t=>t.name===e))[0])||void 0===l?void 0:l.multiple))})})}))}),[g.labels,a,p]),y=n.default.useMemo((()=>e?e.plots.reduce(((e,t)=>{var a,l;return{width:e.width+((null===(a=t.size)||void 0===a?void 0:a.width)||512),height:e.height+((null===(l=t.size)||void 0===l?void 0:l.height)||256)}}),{width:0,height:0}):void 0),[e]);return n.default.createElement(r.default,{metadata:f,progress:null==l?void 0:l.progress,layout:"vertical",control:n.default.createElement(s.default,{config:{image:a.image||[]},allowRegion:!1,disabled:!1,direction:"row",draft:g,showNavigation:null==l?void 0:l.showNavigation,setDraft:p,callbacks:Object.assign(Object.assign({},m),{onSave:(null==m?void 0:m.onSave)?v:void 0,onReset:b})}),content:n.default.createElement(i.default,{media:{main:e?n.default.createElement(o.default,{target:e,labels:g.labels,toggle:h}):void 0,mini:e?n.default.createElement(o.default,{target:e,labels:g.labels}):void 0},size:y,loadState:"loaded",maxViewHeight:null==l?void 0:l.maxViewHeight})})}},13673:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=a(30969),s=l(a(42176)),r=l(a(63742)),d=l(a(72762)),c=l(a(61609)),u=l(a(9035)),m=l(a(20544)),f=a(47359),g=a(5610);t.default=({target:e,config:t={image:[],regions:[]},labels:a,metadata:l,options:p,callbacks:b})=>{var v,h,y,x;const w={mini:n.default.useRef(null),main:n.default.useRef(null),secondaryThumbnail:n.default.useRef(null),viewer:n.default.useRef(null),canvas:n.default.useRef(null),playpause:n.default.useRef(null),fastforward:n.default.useRef(null),mute:n.default.useRef(null)},{setFocus:O}=n.default.useContext(m.default),E=n.default.useMemo((()=>a||[]),[a]),{playbackState:j,setPlaybackState:k,toggleMute:_}=o.usePlaybackState(w,E),{draft:M,setDraft:S,resetDraft:C}=o.useDraftLabelState(j.labels,[j.timestamp]);o.useKeyboardEvent((e=>{let t;switch(e.key){case"Spacebar":case" ":t=M.dirty?null:"playpause";break;case"ArrowRight":t=e.altKey&&!M.dirty?"fastforward":null;break;case"m":t=e.altKey?"mute":null;default:return}t&&w[t].current&&(o.simulateClick(w[t].current).then(O),e.preventDefault(),e.stopPropagation())}),[w]);const I=o.useLoader((e=>new Promise(((e,t)=>{if(w.main.current){const t={width:w.main.current.videoWidth,height:w.main.current.videoHeight};e({duration:w.main.current.duration,layout:t.height>t.width?"horizontal":"vertical",size:t})}else t("Could not handle loading because video element was missing.")}))),e),P=o.useMediaMouseCallbacks(M,S,{source:w.main,canvas:w.canvas},!!(t.regions&&t.regions.length>0),null==p?void 0:p.maxCanvasSize),D=[{icon:j.paused?f.PlayArrow:f.Pause,label:j.paused?"play (spacebar)":"pause (spacebar)",className:"playpause",disabled:j.paused&&M.dirty,ref:w.playpause,callbacks:{onClick:()=>k(j.paused?1:0)}},{icon:f.FastForward,label:"forward (alt→)",className:"fastforward",ref:w.fastforward,disabled:j.paused&&M.dirty,callbacks:{onClick:()=>k(j.playbackRate+1)}},{icon:j.muted?f.VolumeMute:f.VolumeUp,label:"mute/unmute forward (alt+m)",className:"mute",ref:w.mute,disabled:!j.paused,callbacks:{onClick:_}}];return n.default.createElement(r.default,{metadata:l,layout:(null===(v=I.mediaState)||void 0===v?void 0:v.layout)||"horizontal",progress:null==p?void 0:p.progress,control:n.default.createElement(d.default,{config:t,disabled:"loading"===I.loadState||!j.paused,direction:"horizontal"===((null===(h=I.mediaState)||void 0===h?void 0:h.layout)||"horizontal")?"column":"row",draft:M,showNavigation:null==p?void 0:p.showNavigation,setDraft:S,callbacks:Object.assign(Object.assign({},b),{onSave:()=>(null==b?void 0:b.onSave)?b.onSave(g.insertOrAppendByTimestamp({labels:g.draft2labels(M.labels),timestamp:j.timestamp,end:j.end},a||[])):void 0,onReset:C})}),content:n.default.createElement(i.Box,null,n.default.createElement(s.default,{maxViewHeight:null==p?void 0:p.maxViewHeight,size:null===(y=I.mediaState)||void 0===y?void 0:y.size,loadState:I.loadState,onMouseLeave:()=>S(Object.assign(Object.assign({},M),{cursor:Object.assign(Object.assign({},M.cursor),{coords:void 0})})),media:{main:n.default.createElement("video",Object.assign({disablePictureInPicture:!0,onLoadedMetadata:I.callbacks.onLoad,onError:I.callbacks.onError},P,{ref:w.main,src:I.src,style:{cursor:t.regions&&t.regions.length>0?"none":void 0}})),mini:n.default.createElement("video",{src:e,ref:w.mini})},controls:n.default.createElement(i.Stack,{direction:"row",alignItems:"center",spacing:2},n.default.createElement(i.Stack,{direction:"row",alignItems:"center",spacing:0},D.map((e=>n.default.createElement(i.IconButton,Object.assign({},e.callbacks,{disabled:e.disabled,className:e.className,ref:e.ref,key:e.label,"aria-label":e.label,title:e.label,size:"small"}),n.default.createElement(e.icon,{fontSize:"small"}))))),n.default.createElement(c.default,{marks:(a||[]).map((e=>e.timestamp)),timestamp:j.timestamp,duration:null===(x=I.mediaState)||void 0===x?void 0:x.duration,secondary:j.end,secondaryThumbnail:n.default.createElement("video",{src:e,ref:w.secondaryThumbnail,style:{maxWidth:"100%",maxHeight:"100%"}}),setSecondary:e=>k(0,void 0,e),setTimestamp:e=>M.dirty?void 0:k(0,e)}))},n.default.createElement(u.default,{config:t,draft:M,callbacks:P})),n.default.createElement("canvas",{style:{display:"none"},ref:w.canvas}))})}},10955:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(5610);t.default=e=>{var{box:t,color:a,candidate:n}=e,s=l(e,["box","color","candidate"]);const r=t.pt1,d=t.pt2||n;if(!d)return null;const[c,u,m,f]=[Math.min,Math.max].map((e=>["x","y"].map((t=>e.apply(Math,[r,d].map((e=>e[t]))))))).flat(),g=Math.max(m-c,o.epsilon),p=Math.max(f-u,o.epsilon);return i.default.createElement("svg",Object.assign({className:"region box",width:o.pct2css(g),height:o.pct2css(p)},s,{style:Object.assign({position:"absolute",left:o.pct2css(c),top:o.pct2css(u),height:o.pct2css(p),overflow:"visible"},s.style||{})}),i.default.createElement("text",{fill:a,className:"box-text",z:0,dominantBaseline:"hanging",onClick:s.onClick},o.labels2string(t.labels)),i.default.createElement("rect",Object.assign({},s,{x:0,y:0,fill:"none",width:"100%",strokeWidth:"calc(2px / var(--media-viewer-scale, 1))",height:"100%",stroke:a,z:1})))}},87428:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(20544));t.default=()=>{const e=n.default.useContext(o.default);return n.default.createElement(i.Box,{style:{width:"100%",height:"100%",position:"absolute",top:0},onClick:e.setFocus})}},63120:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(76369));t.default=({open:e,existing:t,allowRegion:a=!0,onSave:l,onClose:s})=>{const r={properties:[],displayName:"",name:"",level:"image",options:[],mockSelected:[]},[d,c]=n.default.useState(r);n.default.useEffect((()=>{var e,a,l;t&&c(Object.assign(Object.assign({},r),{properties:[].concat((null===(e=null==t?void 0:t.config)||void 0===e?void 0:e.freeform)?["freeform"]:[]).concat((null===(a=null==t?void 0:t.config)||void 0===a?void 0:a.multiple)?["multiple"]:[]),displayName:t.config.displayName||"",name:t.config.name||"",level:t.level||"image",options:(null===(l=null==t?void 0:t.config.options)||void 0===l?void 0:l.map((e=>e.displayName||e.name)))||[]}))}),[t]);const u=n.default.useMemo((()=>d.name&&(d.properties.indexOf("freeform")>-1||d.options.length>0)),[d]),m=n.default.useMemo((()=>d.options.length>0?d.options.map((e=>Object.assign({name:e},(null==t?void 0:t.config.options)&&t.config.options.find((t=>(t.displayName||t.name)===e))||{}))):void 0),[d,t]);return n.default.createElement(i.Modal,{open:e,"aria-describedby":"add-or-update-new-label-entry-description"},n.default.createElement(i.Box,{sx:{p:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",color:"text.secondary",border:"2px solid #000",boxShadow:24}},n.default.createElement(i.Typography,{id:"add-or-update-new-label-entry-description",sx:{mb:1}},t?"Edit Label Configuration":"Add New Label Configuration"),n.default.createElement(i.Box,{ml:-3,mr:-3},n.default.createElement(o.default,{setSelected:([e])=>c(Object.assign(Object.assign({},d),{name:e})),selected:[d.name],disabled:!!t,config:{multiple:!1,freeform:!0,name:"Name"}}),n.default.createElement(o.default,{setSelected:([e])=>c(Object.assign(Object.assign({},d),{displayName:e})),selected:[d.displayName],disabled:!!t,config:{multiple:!1,freeform:!0,name:"Display Name"}}),n.default.createElement(i.Divider,{sx:{mb:2}}),n.default.createElement(o.default,{disabled:!!t,setSelected:([e])=>c(Object.assign(Object.assign({},d),{level:e||d.level})),selected:[d.level],config:{options:a?[{name:"image",displayName:"Image"},{name:"regions",displayName:"Regions"}]:[{name:"image",displayName:"Image"}],multiple:!1,freeform:!1,name:"Level"}}),n.default.createElement(o.default,{setSelected:e=>c(Object.assign(Object.assign({},d),{properties:e})),selected:d.properties,config:{options:[{name:"freeform",displayName:"Freeform"},{name:"multiple",displayName:"Multiple"}],multiple:!0,freeform:!1,name:"Type"}}),n.default.createElement(o.default,{setSelected:e=>c(Object.assign(Object.assign({},d),{options:e})),selected:d.options,config:{options:[],multiple:!0,freeform:!0,name:"Options"}})),n.default.createElement(i.ButtonGroup,{size:"small","aria-label":"label editing control menu"},n.default.createElement(i.Button,{disabled:!u,onClick:()=>{l({name:d.name,displayName:d.displayName,multiple:d.properties.indexOf("multiple")>-1,freeform:d.properties.indexOf("freeform")>-1,options:m},d.level),c(r)}},"Save"),n.default.createElement(i.Button,{onClick:()=>{s(),c(r)}},"Cancel")),u?n.default.createElement(i.Box,null,n.default.createElement(i.Divider,{sx:{mt:2,mb:2}}),n.default.createElement(i.Typography,null,"Your new label configuration will look like the following."),n.default.createElement(i.Box,{sx:{ml:-3,mr:-3,mt:1,mb:-3}},n.default.createElement(o.default,{selected:d.mockSelected,setSelected:e=>c(Object.assign(Object.assign({},d),{mockSelected:e})),config:{name:d.name,displayName:d.displayName,options:m,multiple:d.properties.indexOf("multiple")>-1,freeform:d.properties.indexOf("freeform")>-1}}))):null))}},72762:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(78564),s=a(47359),r=n(a(99850)),d=n(a(68347)),c=n(a(63120)),u=n(a(87428)),m=n(a(20544)),f=n(a(34591)),g=a(5610),p=a(30969);t.default=e=>{var t,a,n,{draft:b,disabled:v,callbacks:h,showNavigation:y,setDraft:x,allowRegion:w=!0}=e,O=l(e,["draft","disabled","callbacks","showNavigation","setDraft","allowRegion"]);const E=o.useTheme(),j=Object.fromEntries(["next","prev","save","finishRegion","clearRegion","delete","ignore","selectAll","selectNone"].map((e=>[e,i.default.useRef(null)]))),k=p.useMediaLarge(),_={image:g.shortcutify((null===(t=O.config)||void 0===t?void 0:t.image)||[]),regions:g.shortcutify((null===(a=O.config)||void 0===a?void 0:a.regions)||[])},M=k?O.direction:"column",[S,C]=i.default.useState({configEditorOpen:!1,index:null}),[I,P]=i.default.useState(""),{setFocus:D,hasFocus:B}=i.default.useContext(m.default),N=i.default.useCallback((e=>x(Object.assign(Object.assign({},b),{dirty:!0,labels:Object.assign(Object.assign({},b.labels),{[b.drawing.mode]:b.drawing.active?g.insertOrAppend(b.labels[b.drawing.mode],b.drawing.active.region,b.drawing.active.idx,e):b.labels[b.drawing.mode]}),drawing:Object.assign(Object.assign({},b.drawing),{active:void 0})}))),[b]);p.useKeyboardEvent((e=>{let t;if((null==h?void 0:h.onKeyboardEvent)&&h.onKeyboardEvent(e),!e.altKey){switch(e.key){case"A":t=e.ctrlKey&&e.shiftKey?"selectNone":null;break;case"a":t=e.ctrlKey&&!e.shiftKey?"selectAll":null;break;case"ArrowRight":t=e.ctrlKey||e.shiftKey?null:"next",b.dirty&&h.onNext&&P("Please save or reset your changes before advancing to next image.");break;case"ArrowLeft":t="prev",b.dirty&&h.onPrev&&P("Please save or reset your changes before returning to previous image.");break;case"Enter":t=e.ctrlKey||e.shiftKey?null:b.drawing.active?"finishRegion":"save";break;case"Backspace":case"Delete":t=e.ctrlKey||e.shiftKey?null:b.drawing.active?"clearRegion":"delete";break;default:return}t&&j[t].current&&(p.simulateClick(j[t].current).then(D),e.preventDefault(),e.stopPropagation())}}),[h,S,b,j,D]);const L=b.drawing.active?"regions":"image",z=_[L]||[],R=(null==_?void 0:_.regions)&&_.regions.length>0&&w;return i.default.createElement(o.Box,null,i.default.createElement(u.default,null),i.default.createElement(o.Snackbar,{open:""!==I,autoHideDuration:3e3,onClose:()=>P(""),message:I}),i.default.createElement(d.default,{config:z,disabled:v||void 0!==b.drawing.active&&!0===b.drawing.active.region.readonly,editConfig:(null==h?void 0:h.onSaveConfig)?e=>C({configEditorOpen:!0,index:e}):void 0,labels:b.drawing.active?b.drawing.active.region.labels:b.labels.image,setLabels:e=>{x(Object.assign(Object.assign({},b),{dirty:!0,labels:b.drawing.active?b.labels:Object.assign(Object.assign({},b.labels),{image:e}),drawing:b.drawing.active?Object.assign(Object.assign({},b.drawing),{active:Object.assign(Object.assign({},b.drawing.active),{region:Object.assign(Object.assign({},b.drawing.active.region),{labels:e})})}):b.drawing}))}}),b.drawing&&(null===(n=b.drawing.active)||void 0===n?void 0:n.region.metadata)?i.default.createElement(o.Box,{sx:{position:"relative",zIndex:1}},i.default.createElement(f.default,{data:b.drawing.active.region.metadata})):null,Object.keys((b.drawing.active?_.regions:_.image)||[]).length>0?i.default.createElement(o.Divider,{sx:{mb:3}}):null,R?i.default.createElement(o.Box,null,i.default.createElement(o.Stack,{alignContent:"center",direction:M,spacing:2},i.default.createElement(o.Box,{sx:{borderRight:"masks"===b.drawing.mode?`solid 1px ${E.palette.divider}`:void 0}},i.default.createElement(o.FormControl,null,i.default.createElement(o.FormLabel,null,"Drawing Mode"),i.default.createElement(o.RadioGroup,{row:!0,className:"drawing-mode-select",onChange:e=>x(Object.assign(Object.assign({},b),{drawing:"masks"===e.target.value?{flood:!1,mode:"masks"}:{mode:e.target.value}})),value:b.drawing.mode},[["boxes","Box"],["polygons","Polygon"],["masks","Mask"]].map((([e,t],a)=>i.default.createElement(o.FormControlLabel,{key:a,value:e,control:i.default.createElement(o.Radio,{className:"drawing-mode-option",size:"small"}),label:t,disabled:!!b.drawing.active||v})))))),"masks"===b.drawing.mode?i.default.createElement(o.Box,{style:{display:"grid",gridTemplateColumns:"row"==M?"100px 200px 200px":"100px 200px",gridTemplateAreas:"row"==M?'"toggle threshold size"':'"toggle threshold" "size size"',gridTemplateRows:"auto",columnGap:25}},i.default.createElement(o.FormControlLabel,{style:{gridArea:"toggle"},control:i.default.createElement(o.Checkbox,{checked:b.drawing.flood,onChange:(e,t)=>x(Object.assign(Object.assign({},b),{drawing:"masks"===b.drawing.mode?Object.assign(Object.assign({},b.drawing),{flood:t}):b.drawing}))}),label:"Flood"}),i.default.createElement(o.Box,{style:{gridArea:"threshold",display:"inline-flex"}},i.default.createElement(r.default,{name:"Flood Threshold",value:b.cursor.threshold,min:0,disabled:!b.drawing.flood,max:20,width:"100%","aria-label":"segmentation mask flood threshold",onValueChange:e=>x(Object.assign(Object.assign({},b),{cursor:Object.assign(Object.assign({},b.cursor),{threshold:e})}))})),i.default.createElement(o.Box,{style:{gridArea:"size",display:"inline-flex"}},i.default.createElement(r.default,{name:"Cursor Size",value:b.cursor.radius,min:1,max:50,width:"100%","aria-label":"segmentation mask labeling radius",onValueChange:e=>x(Object.assign(Object.assign({},b),{cursor:Object.assign(Object.assign({},b.cursor),{radius:e})}))}))):null),i.default.createElement(o.Divider,{sx:{mb:2,mt:2}})):null,i.default.createElement(o.Stack,{direction:M,spacing:2},b.drawing.active?i.default.createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"region control menu"},i.default.createElement(o.Button,{ref:j.finishRegion,onClick:()=>N(!0),startIcon:"⏎",className:"finish-region"},b.drawing.active.region.readonly?"Deselect":"Finish"),i.default.createElement(o.Button,{startIcon:"⌫",disabled:b.drawing.active.region.readonly,onClick:()=>N(!1),ref:j.clearRegion},"Delete")):i.default.createElement(o.Stack,{direction:M,spacing:2,style:{width:"100%"}},(null==h?void 0:h.onSelectAll)||(null==h?void 0:h.onSelectNone)?i.default.createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"selection control menu",className:"selection-control"},(null==h?void 0:h.onSelectAll)?i.default.createElement(o.Button,{disabled:!(null==h?void 0:h.onSelectAll)||v,onClick:null==h?void 0:h.onSelectAll,startIcon:"⌃A",ref:j.selectAll,className:"select-all"},"Select All"):null,(null==h?void 0:h.onSelectNone)?i.default.createElement(o.Button,{disabled:!(null==h?void 0:h.onSelectNone)||v,onClick:null==h?void 0:h.onSelectNone,startIcon:"⌃⇧A",ref:j.selectNone,className:"select-none"},"Select None"):null):null,i.default.createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"label control menu"},i.default.createElement(o.Button,{ref:j.save,disabled:!(null==h?void 0:h.onSave)||v,onClick:null==h?void 0:h.onSave,startIcon:"⏎",className:"save"},"Save"),(null==h?void 0:h.onIgnore)||(null==h?void 0:h.onUnignore)?i.default.createElement(o.Button,{ref:j.ignore,disabled:v,onClick:(null==h?void 0:h.onIgnore)||(null==h?void 0:h.onUnignore)},(null==h?void 0:h.onIgnore)?"Ignore":"Unignore"):null,(null==h?void 0:h.onDelete)?i.default.createElement(o.Button,{startIcon:"⌫",ref:j.delete,disabled:v,onClick:h.onDelete},"Delete"):null,i.default.createElement(o.Button,{disabled:v||!b.dirty,onClick:null==h?void 0:h.onReset},"Reset")),(null==h?void 0:h.onPrev)||(null==h?void 0:h.onNext)||y?i.default.createElement(o.ButtonGroup,{size:"small",fullWidth:!0,"aria-label":"navigation control menu"},i.default.createElement(o.Button,{startIcon:i.default.createElement(s.KeyboardArrowLeft,null),ref:j.prev,disabled:!(null==h?void 0:h.onPrev)||b.dirty,onClick:h.onPrev},"Previous"),i.default.createElement(o.Button,{startIcon:i.default.createElement(s.KeyboardArrowRight,null),ref:j.next,disabled:!(null==h?void 0:h.onNext)||b.dirty,onClick:h.onNext},"Next")):null,(null==h?void 0:h.onSaveConfig)||(null==h?void 0:h.onShowIndex)?i.default.createElement(o.ButtonGroup,{size:"small","aria-label":"add new configuration menu",fullWidth:!0},(null==h?void 0:h.onSaveConfig)?i.default.createElement(o.Button,{startIcon:i.default.createElement(s.Add,null),className:"add-new-label",onClick:()=>C({index:null,configEditorOpen:!0})},"Add Type"):null,(null==h?void 0:h.onShowIndex)?i.default.createElement(o.Button,{startIcon:i.default.createElement(s.List,null),className:"show-data-index",disabled:v,onClick:h.onShowIndex},"View Index"):null):null),i.default.createElement(o.Box,{title:B?"Listening for keyboard shortcuts.":"Keyboard shortcuts disabled. Click inside the widget to enable.",onClick:D,style:{zIndex:1}},i.default.createElement(s.Keyboard,{color:B?"primary":"warning",fontSize:"large"}))),h&&h.onSaveConfig?i.default.createElement(c.default,{allowRegion:w,open:S.configEditorOpen,onClose:()=>C(Object.assign(Object.assign({},S),{configEditorOpen:!1})),existing:null!==S.index?{config:z[S.index],level:L}:void 0,onSave:(e,t)=>{if(null===S.index&&(_[t]||[]).find((t=>t.name===e.name)))throw"User attempted to add a config with the name of an existing config.";const a=_[t]||[],l=null===S.index?a.length:S.index;h.onSaveConfig(Object.assign(Object.assign({},_),{[t]:a.slice(0,l).concat([e]).concat(a.slice(l+1))})),C({index:null,configEditorOpen:!1})}}):null)}},20544:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)).default.createContext({});t.default=n},69771:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=n.default.forwardRef(((e,t)=>n.default.createElement("div",{style:{width:0,height:0,overflow:"hidden"}},n.default.createElement("input",{ref:t,className:"react-image-labeler-input-target"}))));t.default=i},70649:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271));t.default=({images:e})=>{const[t,a]=n.default.useState(0);return n.default.useEffect((()=>a(0)),[e]),n.default.createElement("div",{style:{width:0,height:0,overflow:"hidden"}},e.map(((e,l)=>l<=t?n.default.createElement("img",{src:e,key:l,onLoad:()=>a(l+1)}):null)))}},68347:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(76369));t.default=({config:e,labels:t,setLabels:a,disabled:l,editConfig:s})=>n.default.createElement(i.Box,{ml:-3,mr:-3},e.map(((e,i)=>n.default.createElement(o.default,{key:e.name,config:e,disabled:l,editConfig:s?()=>s(i):void 0,selected:t[e.name],setSelected:l=>a(Object.assign(Object.assign({},t),{[e.name]:l}))}))))},76369:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=a(47359),s=l(a(20544)),r=a(30969),d=a(11599),c=i.styled(i.Box)`
  & label.label-panel-entry-option-label {
    margin-bottom: 0;
  }

  & legend.label-panel-entry-label {
    margin-bottom: 0;
    border-bottom: none;
  }
`;t.default=({config:e,selected:t,setSelected:a,disabled:l,editConfig:u})=>{const m=n.default.useMemo((()=>e.options||e.multiple?((e,t)=>t.concat(e?e.filter((e=>-1==(t||[]).findIndex((t=>t.name===e)))).map((e=>({name:e,shortcut:""}))):[]))(t||[],e.options||[]):void 0),[e.options,t]),f=n.default.useRef(null),{setFocus:g}=n.default.useContext(s.default),p=n.default.useMemo((()=>m?m.reduce(((e,t,a)=>t.shortcut?Object.assign(Object.assign({},e),{[t.shortcut]:a}):e),{}):{}),[m]),b=n.default.useCallback((l=>a(d.processSelectionChange(l,t,e.multiple))),[t,e,a]);r.useKeyboardEvent((e=>{if(e.ctrlKey||e.shiftKey||!p)return;const t=p[e.key];if(t>-1&&f.current){const a=f.current.querySelector(`.react-image-labeler-input-target[data-index='${t}'] input`);r.simulateClick(a),e.preventDefault(),e.stopPropagation(),g()}}),[p,f,g]);const[v,h]=n.default.useState({freeform:m||e.multiple||!e.freeform||!t?"":t[0]});return n.default.useEffect((()=>h({freeform:m||e.multiple||!e.freeform||!t?"":t[0]||""})),[t]),n.default.createElement(c,{display:"inline"},n.default.createElement(i.FormControl,{sx:{ml:3,mr:3,mt:0,mb:3},component:"fieldset",variant:"standard",className:"label-panel-entry",disabled:!!l,name:e.name},n.default.createElement(i.FormLabel,{component:"legend",className:"label-panel-entry-label"},e.displayName||e.name," ",u?n.default.createElement(i.IconButton,{"aria-label":`edit ${e.name}`,className:"edit-label-entry",onClick:u},n.default.createElement(o.Edit,null)):null),n.default.createElement(i.FormGroup,{ref:f},(m||[]).map(((a,l)=>{const o={checked:!!(t&&t.indexOf(a.name)>-1),onChange:()=>b(a.name),name:a.name,className:"react-image-labeler-input-target"},s=`${a.displayName||a.name} ${a.shortcut?`(${a.shortcut})`:""}`;return n.default.createElement(i.FormControlLabel,{className:"label-panel-entry-option-label",key:l,control:e.multiple?n.default.createElement(i.Checkbox,Object.assign({},o,{"data-index":l})):n.default.createElement(i.Radio,Object.assign({},o,{"data-index":l,onClick:o.onChange})),color:"primary",label:s})}))),e.freeform?n.default.createElement(i.Input,{value:v.freeform,name:`${e.name}-freeform`,placeholder:e.multiple?"Add new option":void 0,onKeyPress:t=>{"Enter"===t.key&&(e.multiple||m?(b(v.freeform),h({freeform:""})):g(),t.preventDefault())},onChange:t=>{h(Object.assign(Object.assign({},v),{freeform:t.target.value})),e.multiple||m||b(t.target.value),t.preventDefault(),t.stopPropagation()}}):null))}},63742:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(87428)),s=l(a(34591)),r=l(a(95599)),d=a(30969);t.default=({layout:e="horizontal",control:t,content:a,metadata:l,progress:c})=>{const u=d.useMediaLarge();return n.default.createElement(i.Box,null,void 0!==c&&c>=0?n.default.createElement(i.Box,{sx:{mb:1}},n.default.createElement(r.default,{progress:c})):null,n.default.createElement(i.Box,{style:{display:"grid",gridTemplateColumns:(a||l)&&"horizontal"===e&&u?"315px 1fr":"1fr",gridTemplateRows:"auto",gridTemplateAreas:a||l?"horizontal"===e&&u?'"control-panel image-target"':'"image-target" "control-panel"':'"control-panel"',gridColumnGap:a||l?20:0,rowGap:a||l?20:0,position:"relative"}},n.default.createElement(i.Box,{style:{position:"relative",gridArea:"control-panel"}},n.default.createElement(o.default,null),t),n.default.createElement(i.Box,{style:{position:"relative",gridArea:"image-target"}},n.default.createElement(o.default,null),n.default.createElement(i.Stack,{rowGap:1},a,l?n.default.createElement(i.Box,{sx:{position:"relative",zIndex:1}},n.default.createElement(s.default,{data:l})):null))))}},6150:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271));t.default=e=>{var{bitmap:t,color:a}=e,n=l(e,["bitmap","color"]);const o=i.default.useRef(null);return i.default.useEffect((()=>{if(t&&o.current){const e=o.current.getContext("2d");if(!e)throw"Failed to find canvas context.";o.current.width=t.dimensions.width,o.current.height=t.dimensions.height;const l=e.createImageData(t.dimensions.width,t.dimensions.height),n="red"===a?[255,0,0,127]:"blue"===a?[0,0,255,127]:[255,255,0,127];Uint8ClampedArray.from(Array.from(t.values).map((e=>255===e?n:[0,0,0,0])).flat()).forEach(((e,t)=>l.data[t]=e)),e.putImageData(l,0,0)}}),[t,a,o]),i.default.createElement("canvas",Object.assign({},n,{className:"region mask",style:Object.assign(Object.assign({},n.style||{}),{imageRendering:"pixelated",position:"absolute",width:"100%",height:"100%",top:0}),ref:o}))}},42176:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(99850)),s=l(a(20544)),r=l(a(87428)),d=a(5610),c=a(30969),u=i.styled(i.Box)`
  & .minimap .mask-cursor {
    display: none;
  }

  & .minimap .box-text {
    visibility: hidden;
  }

  & .viewport img .viewport video {
    vertical-align: bottom;
  }

  & .viewport .loading-placeholder .region {
    visibility: hidden;
  }

  & img,
  & video {
    max-width: none;
    max-height: none;
    image-rendering: pixelated;
  }
`;t.default=({children:e,media:t,size:a,controls:l,loadState:m,onMouseLeave:f,maxViewHeight:g=512})=>{const{setFocus:p}=n.default.useContext(s.default),b={viewport:n.default.useRef(null),minimap:n.default.useRef(null),media:n.default.useRef(null)},[v,h]=n.default.useState({zoom:100,pos:{x:0,y:0},viewportSize:void 0,minimapSize:{width:96,height:96}});n.default.useEffect((()=>{"loading"===m&&h(Object.assign(Object.assign({},v),{pos:{x:0,y:0}}))}),[m]),c.useInterval((()=>{!b.viewport.current||v.viewportSize&&b.viewport.current.clientHeight===v.viewportSize.height&&b.viewport.current.clientWidth===v.viewportSize.width||h(Object.assign(Object.assign({},v),{viewportSize:{width:b.viewport.current.clientWidth,height:b.viewport.current.clientHeight}}))}),100,!0),n.default.useEffect((()=>{if(!a||!b.viewport.current)return;const e=a?96/Math.max(a.width,a.height):void 0;h(Object.assign(Object.assign({},v),{zoom:100*Math.min(b.viewport.current.clientWidth/a.width,g/a.height),minimapSize:e?{width:e*a.width,height:e*a.height}:v.minimapSize||{width:96,height:96}}))}),[a,b.viewport]);const y=n.default.useMemo((()=>v.zoom/100),[v.zoom]),x=n.default.useMemo((()=>{if(a)return{width:y*a.width,height:y*a.height}}),[v.zoom,a]),w=n.default.useMemo((()=>v.viewportSize&&x?{x:Math.min(v.viewportSize.width,x.width)/x.width/2,y:Math.min(v.viewportSize.height,x.height)/x.height/2}:{x:0,y:0}),[v.viewportSize,x]),O=n.default.useCallback((e=>{w?h(Object.assign(Object.assign({},v),{pos:{x:Math.min(Math.max(e.x,0),Math.max(0,1-2*w.x)),y:Math.min(Math.max(e.y,0),Math.max(0,1-2*w.y))}})):console.error("Tried to set position without available data.")}),[v,w]);n.default.useEffect((()=>{const e=Math.min(1-(v.pos.x+2*w.x),0),t=Math.min(1-(v.pos.y+2*w.y),0);(e||t)&&O({x:v.pos.x+e,y:v.pos.y+t})}),[w]);const E=c.useMediaEvent((e=>{p(),O({x:e.x-w.x,y:e.y-w.y})}),b.minimap,[O,w,p]),j=n.default.useCallback((e=>{if(x)return e.preventDefault(),e.stopPropagation(),e.ctrlKey?h(Object.assign(Object.assign({},v),{zoom:v.zoom-e.deltaY/2})):O({x:v.pos.x+e.deltaX/x.width,y:v.pos.y+e.deltaY/x.height}),!1}),[v,x]);return n.default.useEffect((()=>{if(b.media.current)return b.media.current.addEventListener("wheel",j,{passive:!1}),()=>{b.media.current&&b.media.current.removeEventListener("wheel",j)}}),[b.media,j]),n.default.createElement(u,{className:"media-viewer"},n.default.createElement(i.Box,{sx:{mb:2}},n.default.createElement(i.Box,{className:"viewport",style:{position:"relative",overflow:"hidden",height:Math.min(g,x?x.height:g)},ref:b.viewport},n.default.createElement(r.default,null),"loading"==m?n.default.createElement(i.CircularProgress,{style:{position:"absolute",left:"50%",right:"50%",top:"50%",bottom:"50%"}}):null,n.default.createElement(i.Box,{className:"media",ref:b.media,onMouseLeave:"loaded"==m?f:void 0,style:"loaded"===m?{"--media-viewer-scale":y,transform:`scale(${y}) translate(${d.pct2css(-v.pos.x)}, ${d.pct2css(-v.pos.y)})`,transformOrigin:"0 0",position:"absolute"}:{width:0,height:0,overflow:"hidden"}},"loaded"===m?e:null,t.main)),l||null),n.default.createElement(i.Box,{className:"controls",style:{display:"grid",gridTemplateColumns:`${v.minimapSize.width}px 1fr`,gridTemplateRows:"auto",gridTemplateAreas:'"minimap zoom"',gridColumnGap:10}},n.default.createElement(i.Paper,{className:"minimap",style:Object.assign(Object.assign({},v.minimapSize),{position:"relative"}),onClick:E},"loaded"===m&&a?n.default.createElement("div",{style:{width:"100%",height:"100%"}},n.default.createElement("div",{style:{transform:`scale(${v.minimapSize.width/a.width})`,transformOrigin:"0 0"}},t.mini),e,v.viewportSize&&x?n.default.createElement("div",{style:{outline:"2px solid red",outlineOffset:"-1px",position:"absolute",left:d.pct2css(v.pos.x),top:d.pct2css(v.pos.y),width:d.pct2css(Math.min(1-v.pos.x,v.viewportSize.width/x.width)),height:d.pct2css(Math.min(1-v.pos.y,v.viewportSize.height/x.height))}}):null,n.default.createElement("div",{ref:b.minimap,className:"hover-target",style:Object.assign(Object.assign({position:"absolute",top:0},v.minimapSize),{display:"block"})})):null),n.default.createElement(o.default,{name:"Zoom",className:"zoom",min:1,max:Math.max(500,v.zoom),width:"100%",value:v.zoom,onValueChange:e=>h(Object.assign(Object.assign({},v),{zoom:e}))})))}},34591:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564);t.default=({data:e})=>n.default.createElement(i.TableContainer,{tabIndex:0,component:i.Paper,sx:{mb:0,mt:0}},n.default.createElement(i.Table,{"aria-label":"metadata table"},n.default.createElement(i.TableBody,null,Object.entries(e).map((([e,t],a)=>n.default.createElement(i.TableRow,{key:a,sx:{"&:last-child td, &:last-child th":{border:0}}},n.default.createElement(i.TableCell,{align:"right",component:"th",scope:"row"},n.default.createElement("b",null,e)),n.default.createElement(i.TableCell,null,t)))))))},61609:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=a(5610),s=e=>void 0===e||isNaN(e)?"00:00":`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.round(e%60).toString().padStart(2,"0")}`;t.default=({timestamp:e,secondary:t,duration:a,marks:l,setTimestamp:r,setSecondary:d,secondaryThumbnail:c})=>n.default.createElement(i.Box,{sx:{width:"100%"},className:"playbar"},n.default.createElement(i.Stack,{direction:"row",alignItems:"center",spacing:2},n.default.createElement(i.Typography,{fontSize:"small"},s(e),"/",s(a)),n.default.createElement(i.Box,{style:{width:"100%",display:"inherit",position:"relative"}},void 0!==t&&void 0!==a?n.default.createElement(i.Box,{style:{position:"absolute",maxWidth:100,maxHeight:100,left:o.pct2css(t/a),bottom:"60%"}},c):null,n.default.createElement(i.Slider,{size:"small",min:0,step:.01,classes:{thumb:"slider-thumb"},componentsProps:{markLabel:{onClick:e=>{const t=e.currentTarget.getAttribute("data-index");t&&r(l[parseInt(t)])}}},max:a||10,valueLabelDisplay:"auto",marks:l.map((e=>({value:e,label:e}))),value:[e].concat(void 0!==t?[t]:[]),onChange:(e,t,a)=>{const l=t,n=e.altKey;n&&(1==l.length||l[a]>=l[1-a])?d(l[a]):n||r(l[a])}}))))},22834:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(5610);t.default=e=>{var{polygon:t,color:a,candidate:n}=e,s=l(e,["polygon","color","candidate"]);const{points:r,xmin:d,ymin:c,xmax:u,ymax:m}=((e,t)=>{const a=t?e.concat([t]):e,[l,n,i,o]=[Math.min,Math.max].map((e=>["x","y"].map((t=>e.apply(Math,a.map((e=>e[t]))))))).flat();return{points:a,xmin:l,ymin:n,xmax:i,ymax:o}})(t.points,n),f=Math.max(u-d,o.epsilon),g=Math.max(m-c,o.epsilon);return i.default.createElement("svg",Object.assign({className:"region polygon",width:o.pct2css(f),height:o.pct2css(g)},s,{style:Object.assign({position:"absolute",left:o.pct2css(d),top:o.pct2css(c),overflow:"visible"},s.style||{})}),i.default.createElement("text",Object.assign({fill:a},s,{className:"box-text",alignmentBaseline:"hanging",onClick:s.onClick}),o.labels2string(t.labels)),i.default.createElement("svg",Object.assign({},s),Array.from(Array(r.length-1).keys()).map((e=>i.default.createElement("line",{key:e,stroke:a,strokeWidth:"calc(2px / var(--media-viewer-scale, 1))",x1:o.pct2css((r[e].x-d)/f),y1:o.pct2css((r[e].y-c)/g),x2:o.pct2css((r[e+1].x-d)/f),y2:o.pct2css((r[e+1].y-c)/g)})))))}},95599:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(78564),i=l(a(56271));t.default=e=>i.default.createElement(n.Box,{sx:{display:"flex",alignItems:"center"}},i.default.createElement(n.Box,{sx:{width:"100%",mr:1}},i.default.createElement(n.LinearProgress,{variant:"determinate",value:e.progress})),i.default.createElement(n.Box,{sx:{minWidth:20,textAlign:"right"}},i.default.createElement(n.Typography,{variant:"body2",color:"text.secondary"},`${Math.round(e.progress)}%`)))},99850:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(78564);t.default=e=>{var{name:t,value:a,onValueChange:n,min:s,max:r,width:d,disabled:c}=e,u=l(e,["name","value","onValueChange","min","max","width","disabled"]);return i.default.createElement(o.Stack,{direction:"row",alignItems:"center",spacing:2,style:d?{width:d}:{}},i.default.createElement(o.Typography,{fontSize:"small"},t),i.default.createElement(o.Slider,Object.assign({},u,{size:"small",value:a,style:d?{width:d}:{},min:s,classes:{thumb:"slider-thumb"},max:r,disabled:c,valueLabelDisplay:"on",valueLabelFormat:Math.round,onChange:(e,t)=>n(t)})))}},41825:function(e,t,a){var l=this&&this.__rest||function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(a[l[n]]=e[l[n]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(56271)),o=a(5610);t.default=e=>{var{radius:t,round:a,x:n,y:s,crosshair:r}=e,d=l(e,["radius","round","x","y","crosshair"]);return i.default.createElement("div",Object.assign({},d,{className:"mask-cursor",style:Object.assign(Object.assign({},d.style||{}),{height:2*t+"px",width:2*t+"px",borderRadius:a?`${t}px`:void 0,transform:`translate(${-t}px, ${-t}px) scale(calc(1/var(--media-viewer-scale, 1)))`,left:o.pct2css(n),top:o.pct2css(s),position:"absolute",outline:"2px solid red",cursor:"none",overflow:"visible",pointerEvents:"none"})}),r?i.default.createElement("svg",{style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",overflow:"visible",pointerEvents:"none"}},i.default.createElement("line",{x1:"50%",x2:"50%",y1:"0%",y2:"100%",stroke:"red",strokeWidth:"2px"}),i.default.createElement("line",{y1:"50%",y2:"50%",x1:"0%",x2:"100%",stroke:"red",strokeWidth:"2px"})):null)}},9035:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=l(a(22834)),s=l(a(10955)),r=l(a(41825)),d=l(a(6150)),c=a(22493),u=i.styled(i.Box)`
  .box-text {
    font-size: calc(10pt / var(--media-viewer-scale, 1));
    font-family: Roboto, Helvetica, Arial, sans-serif;
    transform: translate(
      calc(10px / var(--media-viewer-scale, 1)),
      calc(10px / var(--media-viewer-scale, 1))
    );
  }
`;t.default=({config:e,draft:t,callbacks:a})=>{var l,i;const m=(null==e?void 0:e.regions)&&e.regions.length>0?"none":void 0;return n.default.createElement(u,null,t.labels.masks.map(((e,l)=>{var i;return"masks"!==t.drawing.mode||(null===(i=t.drawing.active)||void 0===i?void 0:i.idx)!==l?n.default.createElement(d.default,Object.assign({color:e.readonly?"yellow":"blue",key:l,bitmap:e.map,style:{cursor:m,pointerEvents:"masks"===t.drawing.mode?void 0:"none"}},a)):null})),t.labels.polygons.map(((e,l)=>{var i;return"polygons"!==t.drawing.mode||(null===(i=t.drawing.active)||void 0===i?void 0:i.idx)!==l?n.default.createElement(o.default,Object.assign({polygon:e,style:{cursor:m,pointerEvents:"polygons"===t.drawing.mode?void 0:"none"},key:l,color:e.readonly?"yellow":"blue"},a,{onClick:t=>a.onClick(t,e,l)})):null})),t.labels.boxes.map(((e,l)=>{var i;return"boxes"!==t.drawing.mode||(null===(i=t.drawing.active)||void 0===i?void 0:i.idx)!==l?n.default.createElement(s.default,Object.assign({color:e.readonly?"yellow":"blue",box:e,key:l,style:{cursor:m,pointerEvents:"boxes"===t.drawing.mode?void 0:"none"}},a,{onClick:t=>a.onClick(t,e,l)})):null})),t.drawing.active?"polygons"===t.drawing.mode?n.default.createElement(o.default,Object.assign({color:"red",polygon:t.drawing.active.region},a,{candidate:t.drawing.active.idx>-1?void 0:t.cursor.coords,style:{cursor:m}})):"boxes"===t.drawing.mode?n.default.createElement(s.default,Object.assign({color:"red",box:t.drawing.active.region,candidate:t.drawing.active.idx>-1?void 0:t.cursor.coords,style:{cursor:m}},a)):"masks"===t.drawing.mode?n.default.createElement(d.default,Object.assign({color:"red"},a,{bitmap:t.drawing.active.region.map,style:{cursor:m}})):null:null,t.cursor.coords&&void 0!==m?n.default.createElement(r.default,Object.assign({},a,{radius:"masks"===t.drawing.mode?t.cursor.radius:5,x:t.cursor.coords.x,y:t.cursor.coords.y,crosshair:"masks"!==t.drawing.mode&&("boxes"===t.drawing.mode||!c.isPolygonClosed(t.cursor.coords,null===(i=null===(l=t.drawing.active)||void 0===l?void 0:l.region)||void 0===i?void 0:i.points)),round:"masks"!==t.drawing.mode})):null)}},39922:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(56271)),i=a(78564),o=a(48931),s=l(a(20544)),r=i.styled(i.Box)`
  & .recharts-reference-area-rect {
    fill-opacity: 0.25;
  }
  & .recharts-reference-area.active .recharts-reference-area-rect:hover,
  .recharts-reference-area-rect:hover {
    fill: red;
  }
  & .recharts-reference-area.active .recharts-reference-area-rect {
    fill: blue;
  }

  & .recharts-dot {
    fill: white;
    stroke: var(--line-color);
  }

  & .recharts-dot.hoverable:hover,
  .recharts-dot.active {
    fill: var(--line-color);
  }

  & .recharts-dot.active:hover {
    fill: red;
    stroke: red;
  }

  & .recharts-text.recharts-label {
    text-anchor: middle;
  }
`;t.default=({target:e,toggle:t,labels:a})=>{const{setFocus:l}=n.default.useContext(s.default),i=n.default.useMemo((()=>e.plots.map((e=>e.x.values.map(((t,a)=>Object.assign(Object.assign({},Object.fromEntries(e.y.lines.map((e=>[e.name,e.values[a]])))),{[e.x.name]:t})))))),[e]);return n.default.createElement(r,{onClick:l},e.plots.map(((e,s)=>{var r,d,c,u,m,f,g,p,b,v;return n.default.createElement(o.LineChart,{key:s,width:(null===(r=e.size)||void 0===r?void 0:r.width)||512,height:(null===(d=e.size)||void 0===d?void 0:d.height)||256,data:i[s]},n.default.createElement(o.XAxis,{height:e.x.height||60,dataKey:e.x.name,type:e.x.type||"number",tickCount:e.x.tickCount,label:e.x.name}),n.default.createElement(o.YAxis,{domain:null===(c=e.y.limits)||void 0===c?void 0:c.left,label:(null===(u=e.y.labels)||void 0===u?void 0:u.left)?{value:null===(m=e.y.labels)||void 0===m?void 0:m.left,angle:-90,position:"insideLeft"}:void 0,width:(null===(f=e.y.widths)||void 0===f?void 0:f.left)||60,yAxisId:"left",orientation:"left"}),n.default.createElement(o.YAxis,{domain:null===(g=e.y.limits)||void 0===g?void 0:g.right,label:(null===(p=e.y.labels)||void 0===p?void 0:p.right)?{value:null===(b=e.y.labels)||void 0===b?void 0:b.right,angle:-90,position:"insideRight"}:void 0,width:(null===(v=e.y.widths)||void 0===v?void 0:v.right)||60,yAxisId:"right",orientation:"right"}),n.default.createElement(o.Legend,null),n.default.createElement(o.CartesianGrid,null),(e.areas||[]).map(((e,i)=>n.default.createElement(o.ReferenceArea,{yAxisId:"left",label:e.label,key:i,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,className:(a.image&&a.image[e.labelKey]?a.image[e.labelKey]:[]).indexOf(e.labelVal)>-1?"active":void 0,onClick:()=>{t&&t(e.labelKey,e.labelVal),l()}}))),e.y.lines.map(((l,i)=>n.default.createElement(o.Line,{key:i,animationDuration:e.y.animation||1500,yAxisId:l.axis||"left",type:l.type||"monotone",dataKey:l.name,stroke:l.color,dot:!!l.dot&&(i=>{var s,r;const d=i.payload[e.x.name],c=a.image&&!!(null===(s=l.dot)||void 0===s?void 0:s.labelKey),u=!(!c||!a.image[l.dot.labelKey])&&(a.image[l.dot.labelKey]||[]).indexOf(d.toString())>-1,m={key:i.key,r:i.r,cx:i.cx,cy:i.cy,strokeWidth:i.strokeWidth,style:{"--line-color":i.stroke},className:u?"active":c?"hoverable":void 0,onClick:(null===(r=l.dot)||void 0===r?void 0:r.labelKey)&&t?()=>t(l.dot.labelKey,d.toString()):void 0};return n.default.createElement(o.Dot,Object.assign({},m))})}))))})))}},109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unfill=t.fillHsv=t.img2hsv=t.findMaskByPoint=t.values2counts=t.counts2values=t.findLastIndex=void 0;const a=255,l=[{dx:0,dy:-1},{dx:-1,dy:0},{dx:0,dy:1},{dx:1,dy:0}];function n(e,t){let a=e.length;for(;a--;)if(t(e[a],a,e))return a;return-1}t.findLastIndex=n;const i=(e,t)=>Object.assign(Object.assign({},e),{x:e.x+t.dx,y:e.y+t.dy});t.img2hsv=(e,t,a)=>{const l=t.getContext("2d"),n={width:"VIDEO"===(i=e).nodeName?i.videoWidth:i.naturalWidth,height:"VIDEO"===i.nodeName?i.videoHeight:i.naturalHeight};var i;if(!l)throw Error("Failed to get a drawing context.");const o=a/Math.max(n.width,n.height);t.width=Math.round(o*n.width),t.height=Math.round(o*n.height),l.drawImage(e,0,0,n.width,n.height,0,0,t.width,t.height);try{const e=Array.from(l.getImageData(0,0,t.width,t.height).data);return{hsv:new Uint8ClampedArray(Array.from(Array(t.width*t.height).keys()).map((t=>((...e)=>{const[t,a,l]=e,n=Math.max(t,a,l),i=Math.min(t,a,l),o=n-i,s=0===n?0:o/n,r=n/255,d=6*o;let c;switch(n){case i:c=0;break;case t:c=(a-l+o*(a<l?6:0))/d;break;case a:c=(l-t+2*o)/d;break;case l:c=(t-a+4*o)/d;break;default:throw"Failed to select appropriate value for h."}return[c,s,r].map((e=>Math.min(Math.round(255*e),255)))})(...e.slice(4*t,4*t+3)))).flat()),width:t.width,height:t.height}}catch(e){return console.error("Failed to load image, likely due to CORS issues."),{width:t.width,height:t.height}}};const o=(e,t)=>e.y*t+e.x,s=(e,t)=>({x:Math.round(e.x*t.sx),y:Math.round(e.y*t.sy)}),r=(e,t,a)=>{const l={x:Math.max(0,Math.round((e.x-t.dx)*a.width)),y:Math.max(0,Math.round((e.y-t.dy)*a.height))};return{point:l,kernel:{dx:Math.min(Math.round((2*t.dx+Math.min(0,e.x-t.dx))*a.width),a.width-l.x),dy:Math.min(Math.round((2*t.dy+Math.min(0,e.y-t.dy))*a.height),a.height-l.y)}}},d=(e,t,a,l)=>{if(t.x<0||t.y<0||t.x+a.dx>e.dimensions.width||t.y+a.dy>e.dimensions.height)throw`Detected invalid block fill point/parameters. kernel: (${a.dx}, ${a.dy}), point: (${t.x}, ${t.y}), dimensions: (${e.dimensions.width}, ${e.dimensions.height})`;const n=Array(a.dx).fill(l);Array.from(Array(a.dy).keys()).forEach((a=>{e.values.set(n,(t.y+a)*e.dimensions.width+t.x)}))};t.unfill=(e,t,a)=>{const l=r(e,a,t.dimensions);return d(t,l.point,l.kernel,0),t.values},t.fillHsv=(e,t,n)=>{const c=Math.pow(n.threshold,2);if(n.previous&&t.width*t.height!==n.previous.values.length)throw`Incompatible dimensions for mask (${n.previous.values.length}) and canvas (${t.width}x${t.height}).`;const u={values:new Uint8ClampedArray(n.previous?n.previous.dimensions.width*n.previous.dimensions.height:t.width*t.height),dimensions:n.previous?n.previous.dimensions:{height:t.height,width:t.width}},m={sx:u.dimensions.width/t.width,sy:u.dimensions.height/t.height},f={equals:(e,t)=>((e,t,a)=>{if(3!==e.length||3!==t.length)throw"These points do not have the same number of color values.";const[l,n,i]=e,[o,s,r]=t,d=2*Math.min(Math.abs(o-l),255-Math.abs(o-l)),c=Math.abs(s-n),u=Math.abs(r-i);return d*d+c*c+u*u<=a})(Array.from(e),Array.from(t),c),isInBounds:e=>e.x<t.width&&e.y<t.height&&e.x>=0&&e.y>=0,getImageValue:e=>{var a;const l=3*o(e,t.width);return null===(a=t.hsv)||void 0===a?void 0:a.slice(l,l+3)},getMatchValue:e=>{const t=o(s(e,m),u.dimensions.width),n=u.values[t];switch(n){case 0:return"unknown";case a:return"matched";default:return e.direction<0||"0"===n.toString(2).padStart(l.length,"0")[e.direction]?"unknown":"visited"}},setMatchValue:(e,t)=>{const n=o(s(e,m),u.dimensions.width);switch(t){case"matched":u.values[n]=a;break;case"visited":const i=u.values[n].toString(2).padStart(l.length,"0"),o=parseInt(i.substring(0,e.direction)+1+i.substring(e.direction+1),2);u.values[n]=o;break;default:throw`Unsupported flood map setting passed: ${t}`}}},g=r(e,n.radius,u.dimensions),p=r(e,n.radius,t);return d(u,g.point,g.kernel,a),((e,t,a)=>{const n=e.filter((e=>t.isInBounds(e)));let o=0;if(a)for(;n.length>0&&o<a;){const e=n.shift(),a=l.map(((t,a)=>Object.assign(Object.assign({},i(e,t)),{origin:e,direction:a}))).filter(t.isInBounds).filter((e=>"unknown"==t.getMatchValue(e))),s=a.filter((e=>{const a=t.getImageValue(e),l=t.getImageValue(e.origin);return void 0!==l&&void 0!==a&&t.equals(l,a)}));a.forEach((e=>t.setMatchValue(e,"visited"))),s.forEach((e=>t.setMatchValue(e,"matched"))),n.push(...s),o+=1}})(((e,t)=>[Array.from(Array(t.dx).keys()).map((a=>[{x:a+e.x,y:e.y},{x:a+e.x,y:e.y+t.dy}])),Array.from(Array(t.dy).keys()).map((a=>[{y:a+e.y,x:e.x},{y:a+e.y,x:e.x+t.dx}]))].flat(2).map((t=>Object.assign(Object.assign({},t),{origin:e,direction:-1}))))(p.point,p.kernel),f,t.hsv?1e6:0),n.previous&&n.previous.values.forEach(((e,t)=>{e===a&&(u.values[t]=e)})),n.radius&&t.hsv&&((e,t)=>{for(let l=0;l<=e.dimensions.height-t.dy;l++){let n=0;for(;n<=e.dimensions.width-t.dx;)[{dx:0,dy:0},{dx:t.dx,dy:0},t,{dx:0,dy:t.dy}].map((t=>(l+t.dy)*e.dimensions.width+n+t.dx)).every((t=>e.values[t]===a))?(d(e,{x:n,y:l},t,a),n+=t.dx):n+=1}})(u,{dx:Math.round(n.radius.dx*u.dimensions.width),dy:Math.round(n.radius.dy*u.dimensions.height)}),u.values},t.counts2values=e=>new Uint8ClampedArray(e.map(((e,t)=>Array.from(Array(e).keys()).map((()=>t%2==0?a:0)))).flat()),t.values2counts=e=>e.reduce(((e,t)=>((e.length-1)%2==0==(t==a)?e[e.length-1]+=1:e.push(1),e)),[0]),t.findMaskByPoint=(e,t)=>n(t,(t=>t.map.values[Math.round(e.y*t.map.dimensions.height)*t.map.dimensions.width+Math.round(e.x*t.map.dimensions.width)]===a))},22493:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.snapPolygonCoords=t.isPolygonClosed=t.computeDistance=void 0,t.computeDistance=(e,t,a)=>Math.pow((e.x-t.x)*(a?a.width:1),2)+Math.pow((e.y-t.y)*(a?a.height:1),2),t.isPolygonClosed=(e,t)=>{if(!t||0===t.length)return!1;const a=t[0];return e.x===a.x&&e.y===a.y},t.snapPolygonCoords=(e,a,l)=>{if(!a.active||"polygons"!==a.mode||0==a.active.region.points.length)return e;const n=a.active.region.points[0];return Math.sqrt(t.computeDistance(n,e.coords,l))>10?e:Object.assign(Object.assign({},e),{coords:n})}},11599:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.processSelectionChange=t.handleMediaClick=void 0;const l=a(109),n=a(22493),i=a(5610);t.handleMediaClick=(e,t,a,o,s,r,d)=>{let c=e.drawing;if(!a.source.current)throw"Did not find relevant media elements.";const u=parseFloat(getComputedStyle(a.source.current).getPropertyValue("--media-viewer-scale")||"1");if(c.active&&c.active.idx>-1)return Object.assign(Object.assign({},e),{drawing:Object.assign(Object.assign({},c),{active:void 0}),labels:Object.assign(Object.assign({},e.labels),{[c.mode]:c.active?i.insertOrAppend(e.labels[c.mode],e.drawing.active.region,e.drawing.active.idx,!0):e.labels[c.mode]})});if("masks"==c.mode){if(!a.canvas.current)throw"Did not find necessary canvas element.";const n=e.canvas||l.img2hsv(a.source.current,a.canvas.current,r||512),i=Object.assign(Object.assign({},n),{hsv:c.flood?n.hsv:void 0});if("masks"===c.mode&&c.flood&&!i.hsv)throw"Flood fill failed due to cross-origin media. Please disable flood fill.";const s={previous:c.active?c.active.region.map:void 0,radius:{dx:e.cursor.radius/a.source.current.clientWidth/u,dy:e.cursor.radius/a.source.current.clientHeight/u},threshold:e.cursor.threshold};if(c.active)c.active=Object.assign(Object.assign({},c.active),{region:Object.assign(Object.assign({},c.active.region),{map:Object.assign(Object.assign({},c.active.region.map),{values:o&&s.previous?l.unfill(t,s.previous,s.radius):l.fillHsv(t,i,s)})})});else{const a=l.findMaskByPoint(t,e.labels.masks);c.active=-1===a||o?{idx:-1,region:{map:{dimensions:{width:n.width,height:n.height},values:l.fillHsv(t,i,s)},labels:{}}}:{idx:a,region:e.labels.masks[a]}}return Object.assign(Object.assign({},e),{canvas:n,drawing:c})}if("polygons"===c.mode)return c.active?c.active=Object.assign(Object.assign({},c.active),{region:Object.assign(Object.assign({},c.active.region),{points:c.active.region.points.concat([n.snapPolygonCoords(Object.assign(Object.assign({},e.cursor),{coords:t}),c,{width:a.source.current.clientWidth*u,height:a.source.current.clientHeight*u}).coords])})}):c.active=s&&!o&&void 0!==d?{region:s,idx:d}:{region:{points:[t],labels:{}},idx:-1},Object.assign(Object.assign({},e),{drawing:c});if("boxes"===c.mode){if(c.active){let e,a;c.active.region.pt2&&n.computeDistance(t,c.active.region.pt1)<n.computeDistance(t,c.active.region.pt2)?(e=t,a=c.active.region.pt2):(e=c.active.region.pt1,a=t),c.active=Object.assign(Object.assign({},c.active),{region:Object.assign(Object.assign({},c.active.region),{pt1:e,pt2:a})})}else c.active=s&&!o&&void 0!==d?{region:s,idx:d}:{region:{pt1:t,labels:{}},idx:-1};return Object.assign(Object.assign({},e),{drawing:c})}throw"Failed to handle media click operation."},t.processSelectionChange=(e,t,a)=>t&&t.indexOf(e)>-1?a?t.filter((t=>t!=e)):[]:a?(t||[]).concat([e]):[e]},30969:function(e,t,a){var l=this&&this.__awaiter||function(e,t,a,l){return new(a||(a=Promise))((function(n,i){function o(e){try{r(l.next(e))}catch(e){i(e)}}function s(e){try{r(l.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}r((l=l.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.usePlaybackState=t.useMediaMouseCallbacks=t.useDraftLabelState=t.useLoader=t.useInterval=t.simulateHover=t.simulateScroll=t.simulateClick=t.delay=t.useKeyboardEvent=t.useMediaEvent=t.useMediaLarge=t.convertCoordinates=void 0;const i=n(a(56271)),o=n(a(90328)),s=a(78564),r=a(5610),d=a(11599),c=a(22493),u=n(a(20544));t.convertCoordinates=(e,t)=>{if(!t)throw Error("Requested mouse position without a ref.");const{x:a,y:l,width:n,height:i}=t.getBoundingClientRect();return{x:(e.x-window.scrollX-a)/n,y:(e.y-window.scrollY-l)/i}},t.useMediaLarge=()=>s.useMediaQuery(s.useTheme().breakpoints.up("sm")),t.useMediaEvent=(e,a,l,n)=>i.default.useMemo((()=>{const l=n&&0!==n?o.default(e,n):e;return(e,...n)=>l(t.convertCoordinates({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY},a.current),e,...n)}),[...l||[],a]),t.useKeyboardEvent=(e,t)=>{const{hasFocus:a}=i.default.useContext(u.default),l=i.default.useCallback((t=>{var l,n;const i=!(!t.target||!t.target.closest(".react-image-labeler-input-target")),o=null===(l=t.target)||void 0===l?void 0:l.nodeName,s="true"===(null===(n=t.target)||void 0===n?void 0:n.contentEditable);a&&"TEXTAREA"!==o&&("INPUT"!==o||i&&a)&&!s&&e(t)}),(t||[]).concat([e,a]));i.default.useEffect((()=>(document.addEventListener("keydown",l,!1),()=>{document.removeEventListener("keydown",l,!1)})),[l])},t.delay=e=>new Promise((t=>setTimeout(t,e))),t.simulateClick=(e,a)=>new Promise((l=>{if(!e)return;e.focus({preventScroll:!0}),e.classList.add("active");const{x:n,y:i}=e.getBoundingClientRect(),o=Object.assign({bubbles:!0,cancelable:!0},a?{clientX:n+a.x,clientY:i+a.y}:{});e.dispatchEvent(new MouseEvent("mousedown",o)),e.dispatchEvent(new MouseEvent("mouseup",o)),t.delay(100).then((()=>{e.dispatchEvent(new MouseEvent("click",o)),e.classList.remove("active"),e.blur(),l()}))})),t.simulateScroll=(e,t,a)=>l(void 0,void 0,void 0,(function*(){e&&e.dispatchEvent(new WheelEvent("wheel",{deltaX:t.x,deltaY:t.y,ctrlKey:a}))})),t.simulateHover=(e,t)=>{if(!e)return;const{x:a,y:l}=e.getBoundingClientRect();null==e||e.dispatchEvent(new MouseEvent("mousemove",Object.assign({bubbles:!0,cancelable:!0},t?{clientX:a+t.x,clientY:l+t.y}:{})))};const m=()=>{};t.useInterval=(e,t,a,l)=>{const n=i.default.useRef(m);i.default.useEffect((()=>{n.current=e})),i.default.useEffect((()=>{a&&null!==t&&!1!==t&&n.current()}),[a]),i.default.useEffect((()=>{if(null===t||!1===t)return;const e=setInterval((()=>n.current()),t);return()=>clearInterval(e)}),[t].concat(l||[]))},t.useLoader=(e,t)=>{const{setToast:a}=i.default.useContext(u.default),[l,n]=i.default.useState({src:t,loadState:"loading",mediaState:void 0});return i.default.useEffect((()=>{t!==l.src&&n({src:t,loadState:t?"loading":"loaded",mediaState:l.mediaState})}),[t]),Object.assign(Object.assign({},l),{callbacks:{onError:i.default.useCallback((()=>{n(Object.assign(Object.assign({},l),{loadState:"error"})),a(`An error occurred loading ${l.src}.`)}),[l]),onLoad:i.default.useCallback((t=>{e(t).then((e=>n({mediaState:e,loadState:"loaded",src:l.src})),(e=>a(`An error occurred loading ${l.src}.`)))}),[e,l])}})},t.useDraftLabelState=(e,t)=>{const[a,l]=i.default.useState({labels:r.labels2draft(e||{}),dirty:!1,canvas:null,cursor:{radius:5,threshold:1,coords:void 0},drawing:{mode:"boxes"}}),n=i.default.useCallback((()=>l(Object.assign(Object.assign({},a),{labels:r.labels2draft(e||{}),dirty:!1,canvas:null,drawing:"masks"===a.drawing.mode?{mode:"masks",flood:a.drawing.flood}:{mode:a.drawing.mode}}))),[e,a]);return i.default.useEffect((()=>{n()}),[e].concat(t||[])),{draft:a,setDraft:l,resetDraft:n}},t.useMediaMouseCallbacks=(e,a,l,n,o)=>{const{setFocus:s,setToast:r}=i.default.useContext(u.default);return{onClick:t.useMediaEvent(((t,i,c,u)=>{if(s(),n&&l.source.current&&l.canvas.current)try{a(d.handleMediaClick(e,t,l,i.altKey,c,o,u))}catch(e){r(e)}}),l.source,[e]),onMouseMove:t.useMediaEvent((t=>{if(!n||!l.source.current)return;const i=parseFloat(getComputedStyle(l.source.current).getPropertyValue("--media-viewer-scale")||"1");a(Object.assign(Object.assign({},e),{cursor:c.snapPolygonCoords(Object.assign(Object.assign({},e.cursor),{coords:t}),e.drawing,{width:l.source.current.clientWidth*i,height:l.source.current.clientHeight*i})}))}),l.source,[e],0)}};const f=(e,t)=>e&&e.filter((e=>e.timestamp===t))[0]||{timestamp:t,end:void 0,labels:{image:{}}};t.usePlaybackState=(e,a)=>{const{setFocus:l}=i.default.useContext(u.default),[n,o]=i.default.useState({paused:!0,playbackRate:0,muted:!1,timestamp:0,labels:{image:{}},end:void 0});i.default.useEffect((()=>{e.main.current&&o(Object.assign(Object.assign({},n),f(a,e.main.current.currentTime)))}),[a,e.main]),t.useInterval((()=>{!e.main.current||e.main.current.paused===n.paused&&e.main.current.currentTime===n.timestamp&&e.main.current.playbackRate===n.playbackRate||o(Object.assign(Object.assign(Object.assign(Object.assign({},n),{paused:e.main.current.paused,playbackRate:e.main.current.playbackRate}),e.main.current.paused?f(a,e.main.current.currentTime):{end:void 0,labels:{}}),{timestamp:e.main.current.currentTime})),e.secondaryThumbnail.current&&n.end&&e.secondaryThumbnail.current.currentTime!==n.end&&(e.secondaryThumbnail.current.currentTime=n.end),["main","mini"].map((t=>{const a=e[t].current;a&&a&&a.muted!==n.muted&&(a.muted=n.muted)}))}),10,!0);const s=i.default.useCallback((()=>o(Object.assign(Object.assign({},n),{muted:!n.muted}))),[n]),r=i.default.useCallback(((t,a,i)=>{if(e.main.current&&e.mini.current){if(0==t)e.main.current.pause(),e.mini.current.pause();else if(t>0)e.main.current.playbackRate=t,e.mini.current.playbackRate=t,e.main.current.paused&&(e.main.current.play(),e.mini.current.play());else if(t<0)throw"Rewinding is not supported.";void 0!==a&&(e.main.current.currentTime=a,e.mini.current.currentTime=a),void 0!==i&&o(Object.assign(Object.assign({},n),{end:i})),l()}}),[e,n,l]);return{playbackState:n,setPlaybackState:r,toggleMute:s}}},5610:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shortcutify=t.insertOrAppendByTimestamp=t.draft2labels=t.fixBox=t.labels2draft=t.epsilon=t.labels2string=t.copy=t.insertOrAppend=t.pct2css=void 0;const l=a(109);t.pct2css=e=>100*e+"%",t.insertOrAppend=(e,t,a,l)=>(l?[t]:[]).concat(e.slice(0,a>-1?a:void 0).concat(a>-1?e.slice(a+1):[])),t.copy=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){throw`Failed to copy object: ${e}`}},t.labels2string=e=>Object.keys(e).filter((t=>1==e[t].length)).map((t=>`${t}: ${e[t][0]}`)).join(", "),t.epsilon=1e-4,t.labels2draft=e=>({image:t.copy((null==e?void 0:e.image)||{}),polygons:t.copy((null==e?void 0:e.polygons)||[]),masks:((null==e?void 0:e.masks)||[]).map((e=>Object.assign(Object.assign({},e),{map:{dimensions:e.map.dimensions,values:l.counts2values(e.map.counts)}}))),dimensions:(null==e?void 0:e.dimensions)?t.copy(e.dimensions):void 0,boxes:t.copy((null==e?void 0:e.boxes)||[])}),t.fixBox=e=>{const t=e.pt1,a=e.pt2||e.pt1;return Object.assign(Object.assign({},e),{pt1:{x:Math.min(t.x,a.x),y:Math.min(t.y,a.y)},pt2:{x:Math.max(t.x,a.x),y:Math.max(t.y,a.y)}})},t.draft2labels=e=>Object.assign(Object.assign({},e),{boxes:e.boxes.map(t.fixBox),masks:e.masks.map((e=>Object.assign(Object.assign({},e),{map:{dimensions:e.map.dimensions,counts:l.values2counts(e.map.values)}})))}),t.insertOrAppendByTimestamp=(e,a)=>t.insertOrAppend(a,e,a.findIndex((t=>t.timestamp===e.timestamp)),!0).sort(((e,t)=>e.timestamp>t.timestamp?1:-1)),t.shortcutify=e=>{let t=e.reduce(((e,t)=>t.options?e.concat(t.options.filter((e=>e.shortcut)).map((e=>e.shortcut))):e),[]);return e.map((e=>Object.assign(Object.assign({},e),{options:e.options?e.options.map((e=>{let a=e.shortcut;return a||(a=[...e.name.toLowerCase()].find((e=>-1==t.indexOf(e))),a&&t.push(a)),Object.assign(Object.assign({},e),{shortcut:a})})):void 0})))}},4741:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Demonstrator=t.Labeler=t.TimeSeriesLabeler=t.BatchImageLabeler=t.VideoLabeler=t.ImageLabeler=t.MediaIndex=void 0;const n=l(a(30284));t.ImageLabeler=n.default;const i=l(a(13673));t.VideoLabeler=i.default;const o=l(a(72428));t.BatchImageLabeler=o.default;const s=l(a(8800));t.Labeler=s.default;const r=l(a(46951));t.Demonstrator=r.default;const d=l(a(48847));t.MediaIndex=d.default;const c=l(a(28831));t.TimeSeriesLabeler=c.default},18657:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const l=a(4147);t.MODULE_VERSION=l.version,t.MODULE_NAME=l.name},4147:e=>{e.exports=JSON.parse('{"name":"qslwidgets","version":"0.0.28","description":"Widgets for the QSL image labeling package.","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/faustomorales/qsl","bugs":{"url":"https://github.com/faustomorales/qsl/issues"},"license":"MIT","author":{"name":"Fausto Morales","email":"fausto@robinbay.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/faustomorales/qsl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf qsl/labextension","clean:nbextension":"rimraf qsl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","format":"prettier --write src","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch .","storybook":"start-storybook -p 6006","build-storybook":"build-storybook"},"dependencies":{"@emotion/react":"^11.8.1","@emotion/styled":"^11.8.1","@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0","@mui/icons-material":"^5.6.1","@mui/material":"^5.6.1","@mui/x-data-grid":"^5.11.0","lodash.debounce":"^4.0.8","react":"^17.0.2","react-dom":"^17.0.2","react-highlight":"^0.14.0","recharts":"^2.1.10"},"devDependencies":{"@babel/core":"^7.14.5","@babel/preset-env":"^7.14.5","@babel/preset-react":"^7.14.5","@babel/preset-typescript":"^7.14.5","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@storybook/addon-actions":"^6.4.22","@storybook/addon-essentials":"^6.4.22","@storybook/addon-interactions":"^6.4.22","@storybook/addon-links":"^6.4.22","@storybook/react":"^6.4.22","@storybook/testing-library":"^0.0.11","@types/jest":"^26.0.0","@types/lodash.debounce":"^4.0.7","@types/react":"^17.0.11","@types/react-dom":"^17.0.8","@types/react-highlight":"^0.12.5","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","babel-loader":"^8.2.2","css-loader":"^6.7.1","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","html-webpack-plugin":"^5.5.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.0.0","webpack-cli":"^4.0.0"},"babel":{"presets":["@babel/preset-env","@babel/preset-react","@babel/preset-typescript"]},"jupyterlab":{"extension":"lib/plugin","outputDir":"../qsl/ui/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);